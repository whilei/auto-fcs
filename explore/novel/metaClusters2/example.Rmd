---
title: "Example"
author: "JL"
date: "1/3/2019"
output: 
  html_document: 
    keep_md: yes
---
<!-- # Summary -->

<!-- Agnostic overview of panel 1 populations starting from live, single, lymphocytes as defined by OpenCyto. -->



### USAGE

Select a few (less than 10) meta-clusters to characterize before moving beyond the "Tsne Plots" and "Meta-cluster Counts" tabs


### Current Methods


1. Run phenograph on each individual sample, starting with OpenCyto gate of interest (currently live,single lymph)
  - Results displayed here are from samples run on LSR only
2. For each sample's phenograph cluster compute:
   1.  median compensated/transformed expression across all markers used (calling this "RAW")
   2.  median of the normalized (mean 0, SD 1) compensated/transformed expression across all markers use
   3. Frequency of known subsets in the cluster (T cells,B cells, etc) defined by OpenCyto (or kmeans)
   4. Proportion of events in the phenograph cluster out of all events in each known subset
   5. MEM score of events in phenograph cluster, relative to live single lymph. Using method "a" from https://media.nature.com/original/nature-assets/nmeth/journal/v14/n3/extref/nmeth.4149-S1.pdf
3. Combine individual sample's centroids into a single matrix
4. Run phenograph on the combined matrix (currently using "RAW")
5. Run tsne on the combined matrix (currently using "RAW")
7. Compute CV of each meta cluster within control samples
8. Compute meta-MEM score of each meta cluster (median mem score of component phenograph clusters)
  9. Assign MEM labels to each meta-cluster
6. Plot results, coloring by things



<!-- ### Notes (actual cluster number may change) -->

<!-- Meta cluster 14 : CD4/CD8 double positive? -->
<!-- - [CD4+/CD8+ double-positive T cells: more than just a developmental stage?](https://www.ncbi.nlm.nih.gov/pubmed/25360000) -->


<!-- ## Example workflow -->

<!-- 1. Select "Tsne Plots" -->
<!-- 1. Color middle tsne plot by "naive_ClusterFreq" using the "Middle Plot Color" dropdown to see which meta clusters are naive cells -->
<!-- 2. Check out which meta-clusters seem to be made up of mostly naive cells -->
<!-- 3. Select a few naive meta clusters (such as 5, 6, 10, 12, 15, 18, 26, 31, 32, and 34) in the "Meta clusters to characterize" dropdown -->
<!-- 4. Select "Raw Marker Heatmap" to see which markers differentiate these meta-clusters -->
<!--   - Seems to be IgD, CD95, CD19, maybe CD4 -->
<!-- 5. Similar process for "Normalized Heatmap" -->
<!-- 6. Select "Marker Distributions" -->
<!--   - Select IgD, CD95, CD19, and CD4 in the "Markers" dropdown -->
<!--   - Resonably separated distributions -->
<!-- 7. Go back to "Tsne Plots" and color a plot by IgD  -->

### Description of tabs


```{r echo=FALSE}

d=read.delim("../report/tabDesc.txt",stringsAsFactors = FALSE)
library(knitr)
kable(d,format = "markdown")

```


### TODO

1. legends!! Currently the legends are placed over the plots of interest
1. add p-values to distribution plots



### Data column descriptions

- just for reference

```{r echo=FALSE}

d=read.delim("../report/summary.columns")
library(knitr)
kable(d,format = "markdown")

```



